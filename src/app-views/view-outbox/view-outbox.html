<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<!--- ->
<!---->

<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="view-outbox-list.html">
<link rel="import" href="view-outbox-detail.html">

<!-- state -->
<link rel="import" href="/src/app-state/state-media.html">
<link rel="import" href="/src/app-state/state-user-local.html">
<!---->
<!---->
<link rel="import" href="/bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="/src/app-view/app-item.html">
<link rel="import" href="/src/custom-elements/animated-css.html">

<!--- ->
<!--- ->
Demos
https://gridbyexample.com/patterns/header-asmany-footer/
https://codepen.io/rachelandrew/pen/zwPEoX
<!---->

<dom-module id="view-outbox">

  <template>

    <style xinclude="dashboard-styles">
      :host {
        --line-color: #DDDDDD;
      }
      .split {
        border-bottom: 1px var(--line-color) solid;
        
        display: grid; /* https://css-tricks.com/snippets/css/complete-guide-grid/ | http://grid.malven.co/ */
        grid-template-columns: 1fr 1fr;
      }
    </style>
		
    <!-- state -->
    <state-media media-type="{{mediaType}}"></state-media>
    <state-user-local user-local="{{userLocal}}"></state-user-local>
    <app-methods id="methods" show-toast event-dispatch
                 on-method-success="_onMethodSuccess"
                 >
    </app-methods>

    <!-- desktop, tablet -->
    <template restamp is="dom-if" if="[[_computeShowSplit(mediaType)]]">
      <div class="wrapper split">
        <view-outbox-list id="list-desktop"
                            xselected="{{selected}}"
                            selected="{{selectedList}}"
                            user-local="[[userLocal]]"
                            xon-tap="_showDetailDesktop"
                            >
        </view-outbox-list>
        <animated-css id="animated-detail-desktop"
                      entry-animation="slideInLeft"
                      exit-animation="slideOutLeft"
                      on-animation-end="_onAnimationEnd"
                      last-animation-type="{{lastAnimationType}}"
                      last-animation-name="{{lastAnimationName}}"
                      show
                      >
          <view-outbox-detail xselected="[[selected]]"
                                selected="[[selectedDetail]]"
                                user-local="[[userLocal]]"
                                >
          </view-outbox-detail>    
        </animated-css>
      </div>
    </template>

    <!-- with animation and without iron pages -->
    <!-- mobile -->
    <template restamp is="dom-if" if="[[!_computeShowSplit(mediaType)]]">
      <div class="animated-pages-wrapper">
       
        <!-- view-outbox-list -->
        <animated-css id="animated-list-mobile"
                      entry-animation="slideInLeft"
                      exit-animation="slideOutLeft"
                      show
                      >
          <div name="list" on-tap="_showDetailMobile">
            <view-outbox-list selected="{{selected}}"
                                user-local="[[userLocal]]"
                                >
            </view-outbox-list>
          </div>      
        </animated-css>

        <!-- view-outbox-detail -->
        <div name="detail" id="detail">
          <animated-css id="animated-detail-mobile"
                        entry-animation="slideInRight"
                        exit-animation="slideOutRight"
                        xhidden
                        >
            <!--- ->
            <paper-icon-button icon="arrow-back" on-tap="_resetList"></paper-icon-button>
            <!---->
            <app-item type="subpage-header"
                      on-subpage-back-button="_showListMobile"
                      label="[[selected]]"
                      >
            </app-item>
            <!---->
            <view-outbox-detail selected="[[selected]]"
                                user-local="[[userLocal]]"
                                >
            </view-outbox-detail>
          </animated-css>
        </div>         
        <!---->
        <!---->      
  
      </div>
    </template>
    <!---->

  </template>

  <script>

    class ViewOutbox extends Polymer.Element {

      static get is() { return 'view-outbox'; }

			static get properties() { return {
				
				mediaType: {
					type: String, // 'mobile' | 'tablet' | 'desktop'
					notify: true,
				},

      }}
			
      constructor() {
        super();
      }
			
			ready() {
        super.ready();
				//console.log('Component Ready');
			}
      
      _computeShowSplit(s) {
				return s !== 'mobile';
      }  
		
    }

    customElements.define(ViewOutbox.is, ViewOutbox);

  </script>

</dom-module>
